(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7627],{6670:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:function(){return r}})},5302:function(e,t,n){Promise.resolve().then(n.bind(n,6543)),Promise.resolve().then(n.bind(n,8041)),Promise.resolve().then(n.bind(n,4159)),Promise.resolve().then(n.bind(n,9114))},9114:function(e,t,n){"use strict";n.r(t),n.d(t,{Editor:function(){return E}});var r=n(5528),i=n(1349),o=n(5661),a=n(6046),s=n.n(a),l=n(6670),u=i.useLayoutEffect,d=function(e){var t=i.useRef(e);return u(function(){t.current=e}),t},c=function(e,t){if("function"==typeof e){e(t);return}e.current=t},f=function(e,t){var n=(0,i.useRef)();return(0,i.useCallback)(function(r){e.current=r,n.current&&c(n.current,null),n.current=t,t&&c(t,r)},[t])},h={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},p=function(e){Object.keys(h).forEach(function(t){e.style.setProperty(t,h[t],"important")})},m=null,b=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},g=function(){},x=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],v=!!document.documentElement.currentStyle,w=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=x.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;v&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var i=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),o=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:i,borderSize:o}},y=function(e){var t=d(e);(0,i.useLayoutEffect)(function(){var e=function(e){t.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[])},j=(0,i.forwardRef)(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,o=e.minRows,a=e.onChange,s=void 0===a?g:a,u=e.onHeightChange,d=void 0===u?g:u,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),h=void 0!==c.value,x=(0,i.useRef)(null),v=f(x,t),j=(0,i.useRef)(0),S=(0,i.useRef)(),Z=function(){var e,t,i,a,s,l,u,c,f,h,g,v=x.current,y=n&&S.current?S.current:w(v);if(y){S.current=y;var Z=(e=v.value||v.placeholder||"x",void 0===(t=o)&&(t=1),void 0===(i=r)&&(i=1/0),m||((m=document.createElement("textarea")).setAttribute("tabindex","-1"),m.setAttribute("aria-hidden","true"),p(m)),null===m.parentNode&&document.body.appendChild(m),a=y.paddingSize,s=y.borderSize,u=(l=y.sizingStyle).boxSizing,Object.keys(l).forEach(function(e){m.style[e]=l[e]}),p(m),m.value=e,c=b(m,y),m.value="x",h=(f=m.scrollHeight-a)*t,"border-box"===u&&(h=h+a+s),c=Math.max(h,c),g=f*i,"border-box"===u&&(g=g+a+s),[c=Math.min(g,c),f]),N=Z[0],z=Z[1];j.current!==N&&(j.current=N,v.style.setProperty("height",N+"px","important"),d(N,{rowHeight:z}))}};return(0,i.useLayoutEffect)(Z),y(Z),(0,i.createElement)("textarea",(0,l.Z)({},c,{onChange:function(e){h||Z(),s(e)},ref:v}))}),S=n(7483),Z=n(5835),N=n(5233);let z=N.Ry({title:N.Z_().min(3).max(128).optional(),content:N.Yj().optional()});var k=n(9035),R=n(8706);function E(e){let{post:t}=e,{register:a,handleSubmit:l}=(0,o.cI)({resolver:(0,S.F)(z)}),u=i.useRef(),d=(0,Z.useRouter)(),[c,f]=i.useState(!1),[h,p]=i.useState(!1);async function m(){let e=(await n.e(6955).then(n.t.bind(n,6478,23))).default,r=(await n.e(1786).then(n.t.bind(n,1786,23))).default,i=(await n.e(9095).then(n.t.bind(n,9095,23))).default,o=(await n.e(2921).then(n.t.bind(n,2921,23))).default,a=(await n.e(1083).then(n.t.bind(n,1083,23))).default,s=(await n.e(7229).then(n.t.bind(n,7229,23))).default,l=(await n.e(3367).then(n.t.bind(n,3367,23))).default,d=(await n.e(5158).then(n.t.bind(n,5158,23))).default,c=z.parse(t);if(!u.current){let f=new e({holder:"editor",onReady(){u.current=f},placeholder:"Type here to write your post...",inlineToolbar:!0,data:c.content,tools:{header:r,linkTool:l,list:a,code:s,inlineCode:d,table:o,embed:i}})}}async function b(e){f(!0);let n=await u.current.save(),r=await fetch("/api/posts/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title,content:n})});return(f(!1),null==r?void 0:r.ok)?(d.refresh(),(0,k.toast)({message:"Your post has been saved.",type:"success"})):(0,k.toast)({title:"Something went wrong.",message:"Your post was not saved. Please try again.",type:"error"})}return(i.useEffect(()=>{p(!0)},[]),i.useEffect(()=>{if(h)return m(),()=>{var e;null===(e=u.current)||void 0===e||e.destroy(),u.current=null}},[h]),h)?(0,r.jsx)("form",{onSubmit:l(b),children:(0,r.jsxs)("div",{className:"grid w-full gap-10",children:[(0,r.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-10",children:[(0,r.jsx)(s(),{href:"/dashboard",className:"inline-flex items-center rounded-lg border border-transparent bg-transparent py-2 pl-3 pr-5 text-sm font-medium text-slate-900 hover:border-slate-200 hover:bg-slate-100 focus:z-10 focus:outline-none focus:ring-4 focus:ring-slate-200 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-400 dark:hover:bg-slate-700 dark:hover:text-white dark:focus:ring-slate-700",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.P.chevronLeft,{className:"mr-2 h-4 w-4"}),"Back"]})}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:t.published?"Published":"Draft"})]}),(0,r.jsxs)("button",{type:"submit",className:"relative inline-flex h-9 items-center rounded-md border border-transparent bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2",children:[c&&(0,r.jsx)(R.P.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),(0,r.jsx)("span",{children:"Save"})]})]}),(0,r.jsxs)("div",{className:"prose prose-stone mx-auto w-[800px]",children:[(0,r.jsx)(j,{autoFocus:!0,name:"title",id:"title",defaultValue:t.title,placeholder:"Post title",className:"w-full resize-none appearance-none overflow-hidden text-5xl font-bold focus:outline-none",...a("title")}),(0,r.jsx)("div",{id:"editor",className:"min-h-[500px]"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Use"," ",(0,r.jsx)("kbd",{className:"rounded-md border bg-slate-50 px-1 text-xs uppercase",children:"Tab"})," ","to open the command menu."]})]})]})}):null}},8706:function(e,t,n){"use strict";n.d(t,{P:function(){return Z}});var r=n(2303),i=n(5704),o=n(7977),a=n(2346),s=n(4285),l=n(9120),u=n(5407),d=n(6704),c=n(7380),f=n(1790),h=n(7259),p=n(5981),m=n(722),b=n(6833),g=n(5348),x=n(9695),v=n(251),w=n(9552),y=n(6025),j=n(8397),S=n(7158);let Z={logo:r.Z,close:i.Z,spinner:o.Z,chevronLeft:a.Z,chevronRight:s.Z,trash:l.Z,post:u.Z,page:d.Z,media:c.Z,settings:f.Z,billing:h.Z,ellipsis:p.Z,add:m.Z,warning:b.Z,user:g.Z,arrowRight:x.Z,help:v.Z,pizza:w.Z,gitHub:y.Z,twitter:j.Z,check:S.Z}},75:function(e,t,n){"use strict";n.d(t,{cn:function(){return o},p:function(){return a}});var r=n(4517),i=n(5522);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m)((0,r.W)(t))}function a(e){let t=new Date(e);return t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}},9035:function(e,t,n){"use strict";n.r(t),n.d(t,{Toast:function(){return l},Toaster:function(){return s},toast:function(){return u}});var r=n(5528);n(1349);var i=n(855),o=n(75),a=n(8706);let s=i.x7;function l(e){let{visible:t,className:n,...i}=e;return(0,r.jsx)("div",{className:(0,o.cn)("min-h-16 mb-2 flex w-[350px] flex-col items-start gap-1 rounded-md bg-white px-6 py-4 shadow-lg",t&&"animate-in slide-in-from-bottom-5",n),...i})}function u(e){let{title:t,message:n,type:a="default",duration:s=3e3}=e;return i.ZP.custom(e=>{let{visible:i}=e;return(0,r.jsxs)(l,{visible:i,className:(0,o.cn)({"bg-red-600 text-white":"error"===a,"bg-black text-white":"success"===a}),children:[(0,r.jsx)(l.Title,{children:t}),n&&(0,r.jsx)(l.Description,{children:n})]})},{duration:s})}l.Icon=function(e){let{name:t,className:n,...i}=e,s=a.P[t];return s?(0,r.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:(0,r.jsx)(s,{className:(0,o.cn)("h-10 w-10",n),...i})}):null},l.Title=function(e){let{className:t,...n}=e;return(0,r.jsx)("p",{className:(0,o.cn)("text-sm font-medium",t),...n})},l.Description=function(e){let{className:t,...n}=e;return(0,r.jsx)("p",{className:(0,o.cn)("text-sm opacity-80",t),...n})}},6046:function(e,t,n){e.exports=n(1718)},9482:function(){}},function(e){e.O(0,[1718,8122,5801,5660,7516,1744],function(){return e(e.s=5302)}),_N_E=e.O()}]);